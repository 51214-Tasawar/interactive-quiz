<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link rel="stylesheet" href="./Interactivequiz.css" />
  </head>
  <body>
    <div class="Main-container" id="outerBox">
      <p class="text1">Challenge yourself and see how much you know!</p>
      <button class="btn1" onclick="StartQuiz()">Start Quiz</button>
    </div>
    <div class="Inner-container" id="innerBox">
      <div class="nev-btn" onclick="Homepage()">
        <button><i class="fa-solid fa-arrow-left"></i></button>
      </div>
      <p class="text1">Don't rush â€” choose the best answer.</p>
      <div class="Test-box">
        <div class="Qbox" id="Qbox"></div>
        <button class="S-btn" onclick="Next()">Save&Next</button>
        <div class="container">
          <div class="progress">
            <div id="P-bar"></div>
          </div>
          <p id="p-Text" ></p>
        </div>
      </div>
      <button class="R-btn" onclick="Reset()">Reset</button>
    </div>
    <!-- Scoring Board -->
    <div class="scoringBox" id="scoringBox">
      <p>Your Scoring Board is following ...</p>
      <div class="Boxes">
        <div class="corect" id="corect">
          <p>Correct Answar</p>
          <p id="C-answar"></p>
        </div>
        <div class="wrong" id="wrong">
          <p>Wrong Answar</p>
          <p id="W-answar"></p>
        </div>
      </div>
      <div class="Resultbar">
     <div id="Abar"></div>
     <div id="Wbar"></div>
      </div>
      <div class="btn-section">
        <button class="btn-section1" onclick="Homepage()">
          Return to Home
        </button>
        <button class="btn-section2" onclick="StartQuiz()">
          Start the Quiz
        </button>
      </div>
    </div>
    <script>
      let Questions = [];
      let Index = 0;
      let Cnum = 0;
      let Wnum = 0;
      function StartQuiz() {
        document.getElementById("innerBox").style.display = "flex";
        document.getElementById("outerBox").style.display = "none";
        Reset();
      }
      function Homepage() {
        document.getElementById("innerBox").style.display = "none";
        document.getElementById("outerBox").style.display = "flex";
        Reset();
      }
      function ShowData() {
        fetch("Questions.json")
          .then((res) => res.json())
          .then((data) => {
            Questions = data;
            showQuestion();
          });
      }
      function showQuestion() {
        if (Index >= Questions.length) {
          Resultbar()
          document.getElementById("scoringBox").style.display = "flex";
          document.getElementById("outerBox").style.display = "none";
          document.getElementById("innerBox").style.display = "none";
          return;
        }
        let newQuestion = Questions[Index];
        document.getElementById("Qbox").innerHTML = `
      <p>Q-${Index + 1} : ${newQuestion.question}</p>
      <div>
      <input type="radio" name="AnswarBox" id="option1" class="option1" value="${
        newQuestion.option1
      }">
      <label for="option1">${newQuestion.option1}</label>
      </div>
      <div>
      <input type="radio" name="AnswarBox" id="option2" class="option2" value="${
        newQuestion.option2
      }">
      <label for="option2">${newQuestion.option2}</label>
      </div>
      <div>
      <input type="radio" name="AnswarBox" id="option3" class="option3"  value="${
        newQuestion.option3
      }">
      <label for="option3">${newQuestion.option3}</label>
      </div>
      <div>
      <input type="radio" name="AnswarBox" id="option4" class="option4" value="${
        newQuestion.option4
      }">
      <label for="option4">${newQuestion.option4}</label>
      </div>
      `;
      document.getElementById('p-Text').innerHTML = `${Index+1} / ${Questions.length}`
      progressbar()
      
      }
      function Next() {
        let select = document.querySelector('input[name="AnswarBox"]:checked');
        if (!select) {
          alert("Please Select Answar ");
          return;
        }
        let Answar = select.value;
        let correct = Questions[Index].answer;
        if (Answar == correct) {
          Cnum++;
        } else {
          Wnum++;
        }
        document.getElementById("C-answar").innerHTML = Cnum;
        document.getElementById("W-answar").innerHTML = Wnum;
        Index++;
        showQuestion();
      }
      function Reset() {
        Index = 0;
        Cnum = 0;
        Wnum = 0;
        showQuestion();
      }
    function progressbar(){
      let percentage = ((Index+1)/ Questions.length) * 100
      if(percentage > 100){
        return 100
      }
      let bar = document.getElementById('P-bar')
      bar.style.width = `${percentage}%`
    }
    function Resultbar(){
      let Totalquestion  = Questions.length
      let correctprcentage = (Cnum / Totalquestion) * 100 ;
      let worngpercentage = (Wnum / Totalquestion) * 100
      if(correctprcentage > 100) correctprcentage = 100
      if(worngpercentage > 100) worngpercentage = 100
      document.getElementById('Abar').style.width = `${correctprcentage}%`
      document.getElementById('Wbar').style.width = `${worngpercentage}%`
      document.getElementById('Abar').innerHTML = `${Math.floor(correctprcentage)}%`
      document.getElementById('Wbar').innerHTML = `${Math.floor(worngpercentage)}%`
    }
      ShowData();
    </script>
  </body>
</html>
